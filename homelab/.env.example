# homelab/.env.example - OpenClaw homelab deployment configuration
# ================================================================
# Copy to .env (in the repo root) and fill in your values:
#   cp homelab/.env.example .env
#
# Then run (from repo root):
#   podman compose -f homelab/docker-compose.yml \
#                  -f homelab/docker-compose.podman.yml up -d
#
# Secrets workflow:
#   - Channel tokens (Slack, Discord), gateway token, and LLM API keys
#     are passed as env vars and injected into openclaw.json at runtime
#     via ${ENV_VAR} substitution. Never put real tokens in openclaw.json.
#   - Long-term: replace values here with 1Password references and use
#     'op run -- ./homelab/ctl.sh up' to inject secrets at start time.

# ============================================================================
# Directory Configuration
# ============================================================================

# Config directory — maps to /home/node/.openclaw inside the container.
# For the openclaw-agents git repo layout, point to the agent subdirectory:
#   OPENCLAW_CONFIG_DIR=/opt/homelab/data/home/git/openclaw-agents/jerry
OPENCLAW_CONFIG_DIR=/opt/homelab/data/home/git/openclaw-agents/jerry

# Workspace directory — maps to /home/node/.openclaw/workspace inside container.
OPENCLAW_WORKSPACE_DIR=/opt/homelab/data/home/git/openclaw-agents/jerry/workspace

# ============================================================================
# Gateway Configuration
# ============================================================================

# Gateway port
OPENCLAW_GATEWAY_PORT=18789

# Bridge port (internal)
OPENCLAW_BRIDGE_PORT=18790

# Bind address:
#   'lan'      - all interfaces (0.0.0.0); use when accessed via Tailscale/LAN
#   'loopback' - 127.0.0.1 only; use with SSH tunnel for initial testing
OPENCLAW_GATEWAY_BIND=lan

# Authentication token — must match gateway.auth.token in openclaw.json.
# Generate: OPENCLAW_GATEWAY_TOKEN=$(openssl rand -hex 32)
OPENCLAW_GATEWAY_TOKEN=

# ============================================================================
# Channel Tokens
# ============================================================================
# These are substituted into openclaw.json at runtime via ${ENV_VAR} syntax.
# The committed openclaw.json contains ${OPENCLAW_DISCORD_TOKEN} etc. (not the
# real tokens), so secrets never touch git.

# Discord bot token — from Discord Developer Portal > Bot > Token
OPENCLAW_DISCORD_TOKEN=

# Slack bot token (xoxb-...) — from Slack App > OAuth & Permissions
OPENCLAW_SLACK_BOT_TOKEN=

# Slack app-level token (xapp-...) — from Slack App > Basic Information > App-Level Tokens
# Required for Socket Mode.
OPENCLAW_SLACK_APP_TOKEN=

# ============================================================================
# LLM Provider API Keys
# ============================================================================
# OpenClaw reads these standard env var names directly.
# auth-profiles.json (gitignored) takes priority when present; these are the
# fallback for fresh installs and the canonical place to store keys going forward.

# Anthropic — https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=

# Z.ai (GLM models) — https://bigmodel.cn/usercenter/apikeys
ZAI_API_KEY=

# Moonshot (Kimi models) — https://platform.moonshot.cn/console/api-keys
MOONSHOT_API_KEY=

# ============================================================================
# LiteLLM Proxy (optional)
# ============================================================================
# If you run a LiteLLM gateway in your homelab, configure it here.
# Then add the provider to openclaw.json under models.providers:
#
#   "litellm": {
#     "baseUrl": "${LITELLM_BASE_URL}",
#     "apiKey": "${LITELLM_API_KEY}",
#     "api": "openai-completions",
#     "models": [ ... ]
#   }
#
# Leave blank if not yet configured (unused env vars are ignored).
LITELLM_BASE_URL=
LITELLM_API_KEY=

# ============================================================================
# Container Image
# ============================================================================

# OpenClaw version — matches package.json. Bump this when merging upstream.
OPENCLAW_VERSION=2026.2.13

# Local registry for distributing the homelab image across lab nodes.
# Used by ctl.sh push / pull (--tls-verify=false, HTTP).
OPENCLAW_REGISTRY=registry.service.consul:8082

# Image name used by compose and ctl.sh build/push/pull.
# Derived from OPENCLAW_REGISTRY and OPENCLAW_VERSION — only override if you
# need a fully custom image reference (e.g. pulling from a different registry).
OPENCLAW_IMAGE=${OPENCLAW_REGISTRY}/openclaw-homelab:${OPENCLAW_VERSION}

# ============================================================================
# HashiCorp Tools
# ============================================================================

# Nomad — leave as-is if using Consul DNS; change to a direct IP for testing
NOMAD_ADDR=http://nomad.service.consul:4646
# NOMAD_TOKEN=          # only if Nomad ACLs are enabled

# Consul
CONSUL_HTTP_ADDR=http://127.0.0.1:8500
# CONSUL_HTTP_TOKEN=    # only if Consul ACLs are enabled

# ============================================================================
# 1Password CLI
# ============================================================================

# Option A: Service account token (recommended for headless container use)
# Create at: https://developer.1password.com/docs/service-accounts/
OP_SERVICE_ACCOUNT_TOKEN=

# Option B: 1Password Connect server (if you run op-connect in your homelab)
# OP_CONNECT_HOST=https://op-connect.your-tailnet.ts.net
# OP_CONNECT_TOKEN=

# ============================================================================
# Terraform (optional)
# ============================================================================

# Only needed if using Terraform Cloud/Enterprise
# TF_TOKEN_app_terraform_io=

# ============================================================================
# Claude web provider (advanced — skip unless using claude.ai login)
# ============================================================================
CLAUDE_AI_SESSION_KEY=
CLAUDE_WEB_SESSION_KEY=
CLAUDE_WEB_COOKIE=
